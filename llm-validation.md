# LLM Validation: From Pass/Fail to Rubric-Based Evaluation

> 이 문서는 개인적인 설계 노트이자 사고 정리다.  
> 완성된 이론이나 정답을 주장하지 않는다.

---

## 문제의식

채팅 기반 LLM 에이전트의 validation을 설계할 때, 종종 다음과 같은 접근이 등장한다.

- 시나리오를 제공한다
- 에이전트의 응답을 LLM이 평가한다
- 결과를 pass / fail 또는 점수로 반환한다

겉보기에는 간단하고 자동화에도 적합해 보이지만, 이 방식은 **validation으로서 구조적인 결함**을 가진다.

---

## 통째 Pass/Fail 평가의 문제

LLM에게 다음과 같이 묻는 경우를 생각해보자.

> "이 응답이 적절한가? pass 또는 fail로 판단하라."

이 방식의 핵심 문제는 **판정 기준이 명시되어 있지 않다**는 점이다.

- 무엇이 적절한가?
- 무엇이 실패인가?
- 어느 정도면 통과인가?

이 질문들에 대한 답은 **모델 내부의 암묵적 기준(prior)** 에 의존하게 된다.

결과적으로:
- 재현성이 없고
- 비교가 불가능하며
- 모델 버전이나 프롬프트 변화에 따라 기준이 흔들린다

이 상태의 평가는 validation이 아니라 **opinion check**에 가깝다.

---

## True/False 평가도 결국 점수 모델이다

종종 pass/fail 평가가 점수 평가보다 객관적이라고 오해된다.

그러나 구조적으로 보면 다음은 동일하다.

Σ(평가 포인트 점수) >= threshold ? PASS : FAIL

- pass/fail은 점수의 이진화
- 점수 평가는 판정의 연속화

차이는 형식이지 본질이 아니다.

**핵심은 점수가 아니라, 채점 기준(루브릭)의 존재 여부**다.

---

## 루브릭 없는 점수의 위험성

"0~5점으로 평가하라"라는 지시는 다음을 의미한다.

- 평가 기준을 모델이 스스로 정의한다
- 모델이 판단자이자 결정자가 된다

이는 validator 자체가 또 하나의 agent가 되는 구조다.

이 경우:
- 점수의 의미를 외부에서 검증할 수 없고
- 왜 해당 점수가 나왔는지 설명할 수 없으며
- 회귀 테스트가 불가능해진다

---

## 대안: 포인트 분해 + 결정권 분리

현실적인 전제는 다음과 같다.

- 자연어 출력의 의미 판정은 LLM에게 맡길 수밖에 없다
- 그러나 최종 결정까지 맡길 필요는 없다

따라서 권장되는 구조는 다음과 같다.

### 1. 평가 포인트 분해

응답을 하나의 덩어리로 평가하지 않고, 관측 가능한 포인트로 분해한다.

예:

- P1: 핵심 정보 A가 포함되었는가
- P2: 금지된 정보 B가 포함되지 않았는가
- P3: 요청된 형식을 준수했는가

---

### 2. 포인트별 판정 규칙 명시 (루브릭)

각 포인트는 **관측 기준이 명확해야 한다**.

예:

- P1  
  - 기대 의미와 의미적으로 일치 → +1  
  - 누락 또는 반대 의미 → -1  

- P2  
  - 금지 정보 존재 → -1  
  - 존재하지 않음 → +1  

- P3  
  - 지정 형식 충족 → +1  
  - 미충족 → -1  

이 단계에서 LLM은:
- 의미 비교자
- 포함 여부 판별자
- 분류기

역할만 수행한다.

---

### 3. 결정은 코드에서 수행

LLM의 출력은 포인트별 판정 결과일 뿐이다.

최종 판정은 시스템이 수행한다.

score = P1 + P2 + P3 PASS if score >= threshold

이로써:
- 판정 로직은 deterministic
- 기준 변경 시 재채점 가능
- 결과에 대한 설명 가능

---

## LLM을 "판사"가 아니라 "센서"로 사용하기

이 구조의 핵심 철학은 다음과 같다.

> LLM은 결정을 내리는 존재가 아니라  
> 의미적 관측값을 제공하는 센서다.

- hallucination 가능 영역은 leaf node에 격리되고
- 시스템의 최종 결정은 root node에서 고정된다

이는 제어 시스템에서 noisy sensor를 다루는 방식과 유사하다.

---

## 왜 이것이 Validation의 최소 조건인가

Validation이 되기 위해서는 최소한 다음을 만족해야 한다.

- 기준이 명시적일 것
- 판정이 재현 가능할 것
- 결과가 비교 가능할 것
- 실패 원인을 추적할 수 있을 것

루브릭 없는 pass/fail 평가는 이 조건을 충족하지 못한다.

---

## 결론

- "응답은 이런 식이어야 한다"는 요구사항이지 validation이 아니다
- 점수든 true/false든, **채점표(루브릭)는 필수**다
- LLM에게 판정은 맡기되, 결정권은 회수해야 한다

요약하면:

> **LLM은 validator의 일부일 수는 있지만, validator 그 자체가 되어서는 안 된다**

---

## 부록: 다른 이름들

이 구조는 문맥에 따라 다음과 같이 불리기도 한다.

- rubric-based evaluation
- LLM-as-judge with fixed criteria
- semantic oracle + deterministic scorer
- hybrid evaluation architecture

이름은 다르지만 본질은 동일하다.


2025-12-26 appended

“LLM-based free-form judging can be useful for large-scale behavior elicitation, but without an explicit rubric it cannot serve as a reliable validation mechanism.”